# 显卡
1. 显卡的职责是为显示器提供内容，并控制显示器的显示模式和状态，显示器的职责是将那些内容以视觉可见的方式呈现在屏幕上。
2. （独显、集成显卡）一般来说，显卡都是独立生产、销售的部件，需要插在主板上才能工作。当然，像处理器、内存这样的东西，也位于主板上。每台计算机都有主板，它就在机箱内部，有时间你可以打开机箱来观察一下。当然，显卡未必一定是独立的插卡。为了节省使用者的成本，有的显卡会直接做在主板上，这样的显卡也有个名字，叫集成显卡。
3. （像素）显卡控制显示器的最小单位是像素，一个像素对应着屏幕上的一个点。屏幕上通常有数十万乃至更多的像素，通过控制每个像素的明暗和颜色，我们就能让这大量的像素形成文字和美丽的图像。不过，一个很容易想到的问题是，如何来控制这些像素呢？答案是显卡都有自己的存储器，因为它位于显卡上，故称显示存储器（Video-RAM：VRAM)，简称显存，要显示的内容都预先写入显存。和其他半导体存储器一样，显存并没有什么特殊的地方，也是一个按字节访问的存储器件。对显示器来说，显示黑白图像是最简单的，因为只需要控制每个像素是亮，还是不亮。如果把不亮当成比特“0”，亮看成比特“1”，那就好办了。因为，只要将显存里的每个比特和显示器上的每个像素对应起来，就能实现这个目标。
4. （真彩色、图形模式）黑色和白色只需要 1 个比特就能表示，但要显示更多的颜色，1 个比特就不够了。现在最流行的，是用 24 个比特，即 3 个字节，来对应一个像素。因为 2<sup>24</sup>=16777216，所以在这种模式下，同屏可以显示 16777216 种颜色，这称为真彩色。有关颜色的显示和它们与字长的关系，在《穿越计算机的迷雾》—书中有详细的介绍，这里不再赘述。上面所讨论的，是人们常说的图形模式。
5. （字符发生器、控制电路）问题是，操作显存里的比特，使得屏幕上能显示出字符的形状，是非常麻烦、非常繁重的工作，因为你必须计算该字符所对应的比特位于显存里的什么位置。为了方便，工程师们想出了一个办法。就像一个二进制数既可以是一个普通的数，也可以代“L”，这个数被称为是字符“L”的 ASCII 代码，后面会讲到。可以将字符的代码存放到显存里，第 1 个代码对应着屏幕左上角第 1 个字符，第 2 个代码对应着屏幕左上角第 2 个字符，后面的以此类推。剩下的工作是如何用代码来控制屏幕上的像素，使它们或明或暗以构成字符的轮廓，这是字符发生器和控制电路的事情。
6. （文本模式、图形模式）传统上，这种专门用于显示字符的工作方式称文本模式，文本模式和图形模式是显卡的两种基本工作模式，可以用指令访问显卡，设置它的显示模式。在不同的工作模式下，显卡对显存内容的解释是不同的。由于历史的原因，所有在个人计算机上使用的显卡，在加电自检之后都会把自己初始化到 80×25 的文本模式。在这种模式下，屏幕上可以显示 25 行，每行 80 个字符，每屏总共 2000个字符。
7. 为了给出要显示的字符，处理器需要访问显存，把字符的 ASCII 码写进去。但是，显存是位于显卡上的，访问显存需要和显卡这个外围设备打交道。同时，多一道手续自然是不好的，这当中最重要的考量是速度和效率。想想看，你让人传话给父母，和自己亲自往家里打电话，花费的时间是不一样的。为了实现一些快速的游戏动画效果，或者播放高码率的电影，不直接访问显存是办不到的。为此，计算机系统的设计者们，这些敢想敢干的人，决定把显存映射到处理器可以直接访问的地址空间里。也就是内存空间里。一直以来，0xB8000～0xBFFFF 这段物理地址空间，是留给显卡的，由显卡来提供，用来显示文本。除非显卡出了毛病，否则这段空间总是可以访问的。如果显卡出了毛病怎么办呢？很简单，计算机一定不会通过加电自检过程，这就是传说中的严重错误，计算机是无法启动的，更不要说加载并执行主引导扇区的内容了。
8. 80x25 文本模式下颜色表：
![image](https://user-images.githubusercontent.com/32811372/202855608-05083e3d-ab29-46d3-8156-6a25da5efead.png)
9. 你可能觉得奇怪，当屏幕上一片漆黑，什么内容都没有的时候，显存里会是什么内容呢？实际上，这个时候，屏幕上显示的全是黑底白字的空白字符。因为它是空白，自然就无法在黑底上看到任何痕迹了。

## 回车换行
1. 回车和换行的概念最早起源于老式打字机。那种打字机上有滚简，用于使纸张上下卷动，每敲击一个按键，字车往右移动一格，位于下一个可打印的位置。在这种古老而不失先进性的设备上，将字车推到最左边，也就是一行的开始，叫做回车（Carrage Retun)；而拧一下滚简，将纸上卷一行，叫做换行（Line Feed)。如果既回车，又换行，那么，字车将位于下一行的行首。这个过程通常叫做回车换行(CRLF)。
2. 在 128 个 ASCII 代码中，大部分是可显示和打印的字符，还有一部分用于控制显示和打印那些字符的设备。比如 0x0d 是回车，0x0a 是换行。

## 光标
1. 光标（Cursor）是在屏幕上有规律地闪动的一条小横线，通常用于指示下一个要显示的字符位置，这对很多年龄比较大的人来说很熟悉（前提是他们以前也用过计算机)。在那个时代，还没有基于图形显示技术的 Windows，所有的软件都在文本模式下工作，而基于硬件的光标只在文本模式下才会出现。
2. 计算机技术发展得很快，很多硬件都已经或者即将淘汰，但显卡是个例外。即使是现在，多年前形成的 VGA 显示标准在每块显卡中都完好地保留下来了，包括对光标的支持。原因很简单，在显卡中集成一块支持 128 个 ASCII 代码的字符发生器非常方便，在程序中显示一个字符也只要给出它的 ASCII 码。显示图形的代价太大，在计算机加电启动的时候，以及其他一些根本没必要、也没条件使用图形模式的场合，这是最好的选择。
3. 光标在屏幕上的位置保存在显卡内部的两个光标寄存器中，每个寄存器是 8 位的，合起来形成一个 16 位的数值。比如，0 表示光标在屏幕上第 0 行第 0 列，80 表示它在第 1 行第 0 列，因为标准 VGA 文本模式是 25 行，每行 80 个字符。这样算来，当光标在屏幕右下角时，该值为 25×80—1=1999。
4. 光标寄存器是可读可写的。你可以从中读出光标的位置，也可以通过它设置光标的位置。能够通过写入一个数值来设定光标的位置。
